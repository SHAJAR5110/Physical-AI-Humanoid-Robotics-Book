repos:
  # Python code formatting
  - repo: https://github.com/psf/black
    rev: 23.12.0
    hooks:
      - id: black
        language_version: python3.11
        args: [ '--line-length=100' ]
        files: ^backend/

  # Python import sorting
  - repo: https://github.com/PyCQA/isort
    rev: 5.13.2
    hooks:
      - id: isort
        args: [ '--profile', 'black', '--line-length', '100' ]
        files: ^backend/

  # Python linting
  - repo: https://github.com/PyCQA/pylint
    rev: 3.0.3
    hooks:
      - id: pylint
        args: [ '--max-line-length=100', '--disable=R0913' ]
        files: ^backend/
        additional_dependencies: [ 'fastapi', 'sqlalchemy', 'pydantic' ]
        require_serial: true
        stages: [ commit ]
        verbose: true

  # JavaScript/TypeScript formatting
  - repo: https://github.com/pre-commit/mirrors-prettier
    rev: v3.1.0
    hooks:
      - id: prettier
        types_or: [ javascript, typescript, jsx, tsx, json, markdown ]
        files: ^Ai-and-Humanoid-Robotics-Book/
        args: [ '--write', '--prose-wrap', 'always' ]

  # JavaScript/TypeScript linting
  - repo: https://github.com/pre-commit/mirrors-eslint
    rev: v8.56.0
    hooks:
      - id: eslint
        types: [ javascript, typescript, jsx, tsx ]
        files: ^Ai-and-Humanoid-Robotics-Book/(src|docs)/
        args: [ '--fix', '--max-warnings', '0' ]
        additional_dependencies:
          - eslint
          - eslint-config-airbnb
          - eslint-plugin-react
          - eslint-plugin-import
        stages: [ commit ]

  # YAML validation
  - repo: https://github.com/adrienverge/yamllint.git
    rev: v1.33.0
    hooks:
      - id: yamllint
        args: [ '-d', '{extends: default, rules: {line-length: {max: 120}}}' ]
        files: |
          (?x)^(
            \.github/workflows/|
            docker-compose\.yml|
            \.pre-commit-config\.yaml
          )

  # Markdown linting
  - repo: https://github.com/igorshubovych/markdownlint-cli
    rev: v0.36.0
    hooks:
      - id: markdownlint
        args: [ '--fix' ]
        files: |
          (?x)^(
            README\.md|
            specs/|
            backend/README\.md|
            .*\.md$
          )

  # JSON validation
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: check-json
        files: |
          (?x)^(
            package\.json|
            tsconfig\.json|
            \.eslintrc
          )

  # General file checks
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: end-of-file-fixer
        files: |
          (?x)^(
            backend/|
            Ai-and-Humanoid-Robotics-Book/
          )
      - id: trailing-whitespace
        files: |
          (?x)^(
            backend/|
            Ai-and-Humanoid-Robotics-Book/|
            specs/
          )
      - id: check-yaml
        files: |
          (?x)^(
            \.github/workflows/|
            docker-compose\.yml
          )
      - id: check-added-large-files
        args: [ '--maxkb=1000' ]

  # Security checks
  - repo: https://github.com/Lucas-C/pre-commit-hooks
    rev: v1.5.1
    hooks:
      - id: forbid-crlf
        files: |
          (?x)^(
            backend/|
            Ai-and-Humanoid-Robotics-Book/
          )
      - id: forbid-tabs
        files: |
          (?x)^(
            backend/|
            Ai-and-Humanoid-Robotics-Book/
          )

default_language_version:
  python: python3.11

ci:
  autofix_commit_msg: 'chore: auto-format code with pre-commit hooks'
  autofix_prs: true
  autoupdate_branch: ''
  autoupdate_commit_msg: 'chore: update pre-commit hooks'
  autoupdate_schedule: monthly
  skip:
    - pylint
    - eslint
  submodules: false
